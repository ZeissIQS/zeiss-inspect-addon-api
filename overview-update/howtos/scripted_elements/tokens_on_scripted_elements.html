

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" sizes="16x16" type="image/png" href="../../_static/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tokens on scripted elements &mdash; App Development Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme_zeiss.css?v=dc6cf2b8" />

  
    <link rel="canonical" href="https://zeissiqs.github.io/zeiss-inspect-addon-api/2025/howtos/scripted_elements/tokens_on_scripted_elements.html" />
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using script resources" href="../python_api_introduction/using_script_resources.html" />
    <link rel="prev" title="Creating and modifying scripted elements from scripts" href="scripted_elements_noninteractive.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            App Development Documentation
              <img src="../../_static/zeiss-logo-rgb.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../news/news.html">What’s New</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How-to Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/python_api_introduction.html">ZEISS INSPECT Python API Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/selecting_elements.html">Selecting elements in scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_app_editor/using_app_editor.html">Using the App Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_file_format/app_file_format.html">App file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app_documentation/app_documentation.html">Documenting Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_vscode_editor/using_vscode_editor.html">Using Visual Studio Code as an App editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/file_selection_dialog.html">Selecting a file or folder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/user_defined_dialogs.html">User-defined Dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/creating_wizard_dialogs.html">Creating wizard dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_gui_libraries/using_gui_libraries.html">Using an additional Python GUI library</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="scripted_elements_toc.html">Scripted elements</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scripted_elements_introduction.html">Introduction to scripted elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripted_actuals.html">Scripted actuals</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripted_checks.html">Scripted checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripted_elements_noninteractive.html">Creating and modifying scripted elements from scripts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tokens on scripted elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instructions">Instructions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-user-defined-tokens-are-set">How user-defined tokens are set</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage-of-user-defined-tokens-in-scripts">Usage of user-defined tokens in scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage-in-user-defined-checks">Usage in user-defined checks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/using_script_resources.html">Using script resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stages/stages.html">Working with stages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_keywords/project_keywords.html">Project keywords handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_shared_environments/using_shared_environments.html">Using shared environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_wheelhouses/using_wheelhouses.html">Using Python wheelhouses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adding_workspaces_to_apps/adding_workspaces_to_apps.html">Adding workspaces to Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_services/using_services.html">Using services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_scripted_diagrams/using_scripted_diagrams.html">Using scripted diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../localization/localization.html">Localization of Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starting_options/starting_options.html">Software and script starting options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_apps/testing_apps.html">Testing Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting_legacy_projects/scripting_legacy_projects.html">Scripting with legacy projects (part-less)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting_solutions/scripting_solutions.html">Scripting solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Frequently asked questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/index.html">Introduction to the Python API Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/examples_overview.html">ZEISS INSPECT App Examples Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Specification</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/python_api.html">ZEISS INSPECT App Python API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/scripted_elements_api.html">Scripted elements API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/resource_api.html">gom.Resource API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">App Development Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="scripted_elements_toc.html">Scripted elements</a></li>
      <li class="breadcrumb-item active">Tokens on scripted elements</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tokens-on-scripted-elements">
<h1>Tokens on scripted elements<a class="headerlink" href="#tokens-on-scripted-elements" title="Link to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section assumes that you are familiar with the basic concept of Scripted elements. If not, take a look at the <a class="reference internal" href="scripted_elements_introduction.html"><span class="std std-doc">Introduction</span></a>, <a class="reference internal" href="scripted_actuals.html"><span class="std std-doc">Scripted actuals</span></a> and <a class="reference internal" href="scripted_checks.html"><span class="std std-doc">Scripted checks</span></a> sections.</p>
</div>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This page describes how user-defined tokens can be set to user-defined elements (UDEs).</p>
</section>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Link to this heading"></a></h2>
<section id="how-user-defined-tokens-are-set">
<h3>How user-defined tokens are set<a class="headerlink" href="#how-user-defined-tokens-are-set" title="Link to this heading"></a></h3>
<p>In the calculation function that generated the results, the <code class="docutils literal notranslate"><span class="pre">context.data[]</span></code> field can be read and written.</p>
<p>In the following example, a volume defects element was created with following snippet inside the <code class="docutils literal notranslate"><span class="pre">calculation()</span></code> function:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1">#  Simulating user-defined token data</span>
<span class="n">ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span> <span class="p">([</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">166</span><span class="p">)</span> <span class="p">])</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">stages</span><span class="p">:</span>
    <span class="n">context</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;ude_defect_ids&quot;</span> <span class="p">:</span> <span class="n">ids</span><span class="p">,</span> <span class="s2">&quot;ude_test_string&quot;</span> <span class="p">:</span> <span class="s2">&quot;hello world&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Generally, the <code class="docutils literal notranslate"><span class="pre">context.data[]</span></code> field can be used to store intermediate data between the <code class="docutils literal notranslate"><span class="pre">dialog()</span></code> and the <code class="docutils literal notranslate"><span class="pre">calc()</span></code> function, e.g. if you – for preview reasons – pre-calculated some values, you can reuse them in the calc() function.</p>
<p>Starting with SW2021 (Final) however, if you set the <code class="docutils literal notranslate"><span class="pre">context.data[s]</span></code> to hold a Python dictionary – i.e. a key-value map – for each stage <code class="docutils literal notranslate"><span class="pre">s</span></code>, then this data will be interpreted as ‘token’ data. These are generally data entities set to a GOM element, which can be retrieved using a key-string (the token).</p>
<p>With this user-defined token mechanism, you are free to set any data structure as token data to the element you are creating as UDE, as long as it is serializable by the GOM scripting framework. You can use therefore: basic Python data types, numpy arrays, the GOM data types such as GOM.Vec3D, and finally lists and dictionaries of the previously mentioned types.</p>
<p>In the example given above, we create a numpy array with IDs, one for each defect, and set this together with an exemplary test string as token data to the element.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Note: Naming of user-defined tokens</strong></p>
<p>⚠️ The keys in the key-value map of user-defined tokens <strong>must</strong> start with the prefix <code class="docutils literal notranslate"><span class="pre">ude_</span></code>. If this is not the case, the token will not be set.</p>
</div>
</section>
<section id="usage-of-user-defined-tokens-in-scripts">
<h3>Usage of user-defined tokens in scripts<a class="headerlink" href="#usage-of-user-defined-tokens-in-scripts" title="Link to this heading"></a></h3>
<p>Let’s see how this data can be retrieved after the element was successfully created:</p>
<ol class="arabic">
<li><p>Open the script editor and create a new script. In the new script, press “F2” or right-click → Insert → Element Value.</p>
<p>In the appearing dialog, search for the volume defects element, and you will find the user-defined data in the “User-defined keywords” section.</p>
<p><img alt="" src="../../_images/user_defined_tokens-1.png" /></p>
<p>For simple data types, you will get a preview (see Screenshot). For more complex types, including numpy arrays, there is no preview. The further usage works nevertheless.</p>
</li>
<li><p>If you click “OK”, the syntax how to retrieve the data is inserted in your new script. Of course, it is also possible to obtain the data from the element, if you have got a reference to it in a dialog selector or similar.</p></li>
<li><p>You can now use the data in follow-up scripts.</p>
<p><img alt="" src="../../_images/user_defined_tokens-2.png" /></p>
</li>
</ol>
</section>
<section id="usage-in-user-defined-checks">
<h3>Usage in user-defined checks<a class="headerlink" href="#usage-in-user-defined-checks" title="Link to this heading"></a></h3>
<p>Just as all other tokens on the element, you can access the data in user-defined checks.</p>
<p>For simple data types, this is straightforward. To make this work for indexed data, as in the example of “defect_ids”, you have to make sure that the array data you set to the token has the same length as the indices of the element.</p>
<p>In the example above, the defect element gets 166 meshes, which will result in indices from 0 to 165.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="scripted_elements_noninteractive.html" class="btn btn-neutral float-left" title="Creating and modifying scripted elements from scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../python_api_introduction/using_script_resources.html" class="btn btn-neutral float-right" title="Using script resources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Carl Zeiss GOM Metrology GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  <p></p>
  <div class="footer">
    <a href="https://www.gom.com/en/imprint" target="_blank" rel="noopener noreferrer">Imprint</a>
  </div>
  <jinja2.runtime.BlockReference object at 0x7f076f450130>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>