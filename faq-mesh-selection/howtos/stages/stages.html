<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" sizes="16x16" type="image/png" href="../../_static/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Working with stages &mdash; Add-On Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme_zeiss.css?v=dc6cf2b8" />

  
    <link rel="canonical" href="https://zeissiqs.github.io/zeiss-inspect-addon-api/2023/howtos/stages/stages.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Project keywords handling" href="../project_keywords/project_keywords.html" />
    <link rel="prev" title="Using script resources" href="../python_api_introduction/using_script_resources.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Add-On Documentation
              <img src="../../_static/zeiss-logo-rgb.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../news/news.html">What’s New</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How-to Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/python_api_introduction.html">ZEISS INSPECT Python API Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_add_on_editor/using_add_on_editor.html">Using the Add-on Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_on_file_format/add_on_file_format.html">Add-on file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_on_documentation/add_on_documentation.html">Documenting Add-ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_vscode_editor/using_vscode_editor.html">Using Visual Studio Code as an add-on editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/user_defined_dialogs.html">User-defined Dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/creating_wizard_dialogs.html">Creating wizard dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_gui_libraries/using_gui_libraries.html">Using an additional Python GUI library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripted_elements/scripted_elements_toc.html">Scripted elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api_introduction/using_script_resources.html">Using script resources</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Working with stages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#referencing-stages-and-iterating-over-stages">Referencing stages and iterating over stages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-or-modifying-timestamps">Setting or modifying timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reordering-stages">Reordering stages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#related">Related</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project_keywords/project_keywords.html">Project keywords handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_shared_environments/using_shared_environments.html">Using shared environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using_wheelhouses/using_wheelhouses.html">Using Python wheelhouses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adding_workspaces_to_addons/adding_workspaces_to_addons.html">Adding workspaces to add-ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../localization/localization.html">Localization of Add-ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starting_options/starting_options.html">Software and script starting options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_addons/testing_addons.html">Testing add-ons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Frequently asked questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/index.html">ZEISS INSPECT Python API Examples Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/data_interfaces.html">data_interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/point_pixel_transformations.html">point_pixel_transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/dialog_widgets.html">dialog_widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/misc.html">misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/script_icons.html">script_icons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/script_resources.html">script_resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/scripted_actuals.html">scripted_actuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_examples/scripted_checks.html">scripted_checks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Specification</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/python_api.html">ZEISS INSPECT Python API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/scripted_elements_api.html">Scripted elements API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/resource_api.html">gom.Resource API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Add-On Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Working with stages</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="working-with-stages">
<h1>Working with stages<a class="headerlink" href="#working-with-stages" title="Link to this heading"></a></h1>
<blockquote>
<div><p>Abstract: Stages are used in ZEISS INSPECT for comparing inspection results of the same nominal part but different actual meshes. In ZEISS INSPECT Correlate, stages are used for 3D image series. This section provides some basic information about using stages in Add-ons and shows typical applications of Python scripts for working with stages.</p>
</div></blockquote>
<dl class="simple myst">
<dt>Stage reference</dt><dd><p>The ZEISS INSPECT internal reference to a stage</p>
</dd>
<dt>Stage index</dt><dd><p>Numerical index of a stage</p>
</dd>
<dt>Stage name</dt><dd><p>Name of a stage</p>
</dd>
</dl>
<section id="referencing-stages-and-iterating-over-stages">
<h2>Referencing stages and iterating over stages<a class="headerlink" href="#referencing-stages-and-iterating-over-stages" title="Link to this heading"></a></h2>
<p>In the following examples, the current project has five stages named ‘ZEISS Training Object Mesh 1’ to ‘ZEISS Training Object Mesh 5’.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Number of stages</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">))</span>
<span class="c1"># output: 5</span>

<span class="c1"># Reference to last stage</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="c1"># output: gom.app.project.stages[&#39;ZEISS Training Object Mesh 5&#39;]</span>

<span class="c1"># Select stage by name</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="s1">&#39;ZEISS Training Object Mesh 2&#39;</span><span class="p">])</span>
<span class="c1"># output: gom.app.project.stages[&#39;ZEISS Training Object Mesh 2&#39;]</span>

<span class="c1"># Select stage by index</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="c1"># output: gom.app.project.stages[&#39;ZEISS Training Object Mesh 2&#39;]</span>

<span class="c1"># Show the specified stage</span>
<span class="n">gom</span><span class="o">.</span><span class="n">script</span><span class="o">.</span><span class="n">sys</span><span class="o">.</span><span class="n">show_stage</span> <span class="p">(</span><span class="n">stage</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># Basic iteration over all stages (all stages enabled)</span>
<span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stage </span><span class="si">{</span><span class="n">stage</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s1"> Name: </span><span class="si">{</span><span class="n">stage</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># output:</span>
<span class="c1"># Stage 0 Name: ZEISS Training Object Mesh 1</span>
<span class="c1"># Stage 1 Name: ZEISS Training Object Mesh 2</span>
<span class="c1"># Stage 2 Name: ZEISS Training Object Mesh 3</span>
<span class="c1"># Stage 3 Name: ZEISS Training Object Mesh 4</span>
<span class="c1"># Stage 4 Name: ZEISS Training Object Mesh 5</span>

<span class="c1"># Iteration over selected stages</span>
<span class="c1"># Note: </span>
<span class="c1"># The order is always the same as in the timeline, even if the values of `first` and `last` are swapped!</span>
<span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="n">gom</span><span class="o">.</span><span class="n">StageSelection</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="s1">&#39;ZEISS Training Object Mesh 2&#39;</span><span class="p">],</span>
                                <span class="n">last</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="s1">&#39;ZEISS Training Object Mesh 4&#39;</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Stage </span><span class="si">{</span><span class="n">stage</span><span class="o">.</span><span class="n">index</span><span class="si">}</span><span class="s1"> Name: </span><span class="si">{</span><span class="n">stage</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="c1"># output:</span>
<span class="c1"># Stage 1 Name: ZEISS Training Object Mesh 2</span>
<span class="c1"># Stage 2 Name: ZEISS Training Object Mesh 3</span>
<span class="c1"># Stage 3 Name: ZEISS Training Object Mesh 4</span>
</pre></div>
</div>
<p>To access element values in a specific stage, you can use the <code class="docutils literal notranslate"><span class="pre">in_stage</span></code> accessor. The following example shows how strain values of a set of points are printed for a set of stages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">NPOINTS</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">STAGES</span><span class="p">:</span>
        <span class="n">x_strain</span> <span class="o">=</span> <span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">inspection</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;Point </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">.epsX&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">in_stage</span><span class="p">[</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">result_dimension</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Point </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">, Stage </span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">x_strain</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="setting-or-modifying-timestamps">
<h2>Setting or modifying timestamps<a class="headerlink" href="#setting-or-modifying-timestamps" title="Link to this heading"></a></h2>
<p>It is possible to apply timestamps to stages. A common use case are deformation measurements, which are typically performed at a fixed interval.</p>
<p>The following code writes timestamps to all stages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">timestamp</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">:</span>
    <span class="c1"># Set the timestamp of each stage to a new value</span>
    <span class="n">gom</span><span class="o">.</span><span class="n">script</span><span class="o">.</span><span class="n">sys</span><span class="o">.</span><span class="n">set_stage_time_stamp</span><span class="p">(</span>
        <span class="n">stage</span><span class="o">=</span><span class="n">stage</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">StageTimeStamp</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2024</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">29</span><span class="p">,</span> 
                                     <span class="n">hour</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">second</span><span class="o">=</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">millisecond</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">timestamp</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="reordering-stages">
<h2>Reordering stages<a class="headerlink" href="#reordering-stages" title="Link to this heading"></a></h2>
<p>Occasionally, stages in the timeline are not in the required order and must be reordered.</p>
<p>Create an array with the stage names in the target order - this is typically done with the built-in Python sorting function <code class="docutils literal notranslate"><span class="pre">sorted()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">target_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ZEISS Training Object Mesh 5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ZEISS Training Object Mesh 4&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ZEISS Training Object Mesh 3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ZEISS Training Object Mesh 2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ZEISS Training Object Mesh 1&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Use the function <code class="docutils literal notranslate"><span class="pre">change_stage_order()</span></code> to move each stage to the desired position:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">stage_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">target_list</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Moving </span><span class="si">{</span><span class="n">stage_name</span><span class="si">}</span><span class="s1"> to index </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">gom</span><span class="o">.</span><span class="n">script</span><span class="o">.</span><span class="n">sys</span><span class="o">.</span><span class="n">change_stage_order</span><span class="p">(</span>
        <span class="n">stages</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">StageSelection</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">stage_name</span><span class="p">],</span>
                                  <span class="n">last</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">stage_name</span><span class="p">]),</span>
        <span class="n">target</span><span class="o">=</span><span class="n">gom</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">stages</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="related">
<h2>Related<a class="headerlink" href="#related" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><a href="../python_api_introduction/python_api_introduction.html#properties-of-different-stages">ZEISS INSPECT Python API Introduction - Access element properties - Properties of different stages</a></p></li>
<li><p><a href="../project_keywords/project_keywords.html#stage-specific-keywords">Project keyword handling - Stage specific keywords</a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../python_api_introduction/using_script_resources.html" class="btn btn-neutral float-left" title="Using script resources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../project_keywords/project_keywords.html" class="btn btn-neutral float-right" title="Project keywords handling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Carl Zeiss GOM Metrology GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
  <p></p>
  <div class="footer">
    <a href="https://www.gom.com/en/imprint" target="_blank" rel="noopener noreferrer">Imprint</a>
  </div>
  <jinja2.runtime.BlockReference object at 0x7f735445e080>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>